<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>并查集 | 前端男孩</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="让学习前端变得更简单">
    
    <link rel="preload" href="/blog/assets/css/0.styles.e00172dc.css" as="style"><link rel="preload" href="/blog/assets/js/app.a1d041da.js" as="script"><link rel="preload" href="/blog/assets/js/3.157d387a.js" as="script"><link rel="preload" href="/blog/assets/js/22.3972cd73.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.10d04eac.js"><link rel="prefetch" href="/blog/assets/js/11.9ba3bd4a.js"><link rel="prefetch" href="/blog/assets/js/12.976294f0.js"><link rel="prefetch" href="/blog/assets/js/13.6d8c16d0.js"><link rel="prefetch" href="/blog/assets/js/14.de7902db.js"><link rel="prefetch" href="/blog/assets/js/15.5a1ba4fb.js"><link rel="prefetch" href="/blog/assets/js/16.5c0738b0.js"><link rel="prefetch" href="/blog/assets/js/17.24ad9fc5.js"><link rel="prefetch" href="/blog/assets/js/18.97466a80.js"><link rel="prefetch" href="/blog/assets/js/19.ab7f45bf.js"><link rel="prefetch" href="/blog/assets/js/20.bc814125.js"><link rel="prefetch" href="/blog/assets/js/21.d2e7a98e.js"><link rel="prefetch" href="/blog/assets/js/23.051f60ea.js"><link rel="prefetch" href="/blog/assets/js/24.17690bc6.js"><link rel="prefetch" href="/blog/assets/js/25.fb9095e4.js"><link rel="prefetch" href="/blog/assets/js/26.d21ad9c7.js"><link rel="prefetch" href="/blog/assets/js/27.2e0727d0.js"><link rel="prefetch" href="/blog/assets/js/28.0d67e588.js"><link rel="prefetch" href="/blog/assets/js/29.b6ee7ea6.js"><link rel="prefetch" href="/blog/assets/js/30.633a0933.js"><link rel="prefetch" href="/blog/assets/js/31.039c8a8a.js"><link rel="prefetch" href="/blog/assets/js/32.ebd6d0af.js"><link rel="prefetch" href="/blog/assets/js/33.62d809ef.js"><link rel="prefetch" href="/blog/assets/js/34.748847d5.js"><link rel="prefetch" href="/blog/assets/js/35.7d036cca.js"><link rel="prefetch" href="/blog/assets/js/36.c916c0c5.js"><link rel="prefetch" href="/blog/assets/js/37.1874ee1e.js"><link rel="prefetch" href="/blog/assets/js/38.d2ec8309.js"><link rel="prefetch" href="/blog/assets/js/39.8dde5718.js"><link rel="prefetch" href="/blog/assets/js/4.7d540803.js"><link rel="prefetch" href="/blog/assets/js/40.c7c9be08.js"><link rel="prefetch" href="/blog/assets/js/41.87da1fc9.js"><link rel="prefetch" href="/blog/assets/js/42.b2733684.js"><link rel="prefetch" href="/blog/assets/js/43.9e0ee656.js"><link rel="prefetch" href="/blog/assets/js/44.63e7c722.js"><link rel="prefetch" href="/blog/assets/js/45.175455ba.js"><link rel="prefetch" href="/blog/assets/js/5.0e2a38a9.js"><link rel="prefetch" href="/blog/assets/js/6.e032fae7.js"><link rel="prefetch" href="/blog/assets/js/7.3f3e7035.js"><link rel="prefetch" href="/blog/assets/js/8.dab26245.js"><link rel="prefetch" href="/blog/assets/js/9.50c616e9.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.2dc030f4.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.e00172dc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">前端男孩</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/blog/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/blog/computer/" class="nav-link router-link-active">
  计算机基础
</a></div><div class="nav-item"><a href="/blog/front/" class="nav-link">
  前端知识体系
</a></div><div class="nav-item"><a href="https://github.com/ZhangGuangZe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/blog/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/blog/computer/" class="nav-link router-link-active">
  计算机基础
</a></div><div class="nav-item"><a href="/blog/front/" class="nav-link">
  前端知识体系
</a></div><div class="nav-item"><a href="https://github.com/ZhangGuangZe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>数据结构与算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/computer/algorithms/" aria-current="page" class="sidebar-link">简介</a></li><li><a href="/blog/computer/algorithms/analysis.html" class="sidebar-link">算法分析</a></li><li><a href="/blog/computer/algorithms/array.html" class="sidebar-link">数组</a></li><li><a href="/blog/computer/algorithms/linked-list.html" class="sidebar-link">链表</a></li><li><a href="/blog/computer/algorithms/stack.html" class="sidebar-link">栈</a></li><li><a href="/blog/computer/algorithms/queue.html" class="sidebar-link">队列</a></li><li><a href="/blog/computer/algorithms/recursion.html" class="sidebar-link">递归</a></li><li><a href="/blog/computer/algorithms/sorting.html" class="sidebar-link">排序算法</a></li><li><a href="/blog/computer/algorithms/binary-search.html" class="sidebar-link">二分查找</a></li><li><a href="/blog/computer/algorithms/hash-table.html" class="sidebar-link">散列表</a></li><li><a href="/blog/computer/algorithms/tree.html" class="sidebar-link">树</a></li><li><a href="/blog/computer/algorithms/heap.html" class="sidebar-link">堆</a></li><li><a href="/blog/computer/algorithms/trie.html" class="sidebar-link">Trie 树</a></li><li><a href="/blog/computer/algorithms/design.html" class="sidebar-link">算法设计</a></li><li><a href="/blog/computer/algorithms/graph.html" class="sidebar-link">图</a></li><li><a href="/blog/computer/algorithms/disjoint-set.html" aria-current="page" class="active sidebar-link">并查集</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/computer/algorithms/disjoint-set.html#表示" class="sidebar-link">表示</a></li><li class="sidebar-sub-header"><a href="/blog/computer/algorithms/disjoint-set.html#操作" class="sidebar-link">操作</a></li><li class="sidebar-sub-header"><a href="/blog/computer/algorithms/disjoint-set.html#实现" class="sidebar-link">实现</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/computer/algorithms/disjoint-set.html#quick-find" class="sidebar-link">quick-find</a></li><li class="sidebar-sub-header"><a href="/blog/computer/algorithms/disjoint-set.html#quick-union" class="sidebar-link">quick-union</a></li><li class="sidebar-sub-header"><a href="/blog/computer/algorithms/disjoint-set.html#最优算法" class="sidebar-link">最优算法</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/computer/algorithms/disjoint-set.html#应用场景" class="sidebar-link">应用场景</a></li><li class="sidebar-sub-header"><a href="/blog/computer/algorithms/disjoint-set.html#参考" class="sidebar-link">参考</a></li></ul></li><li><a href="/blog/computer/algorithms/strings.html" class="sidebar-link">字符串匹配算法</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>网络协议</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/computer/protocols/" class="sidebar-link">简介</a></li><li><a href="/blog/computer/protocols/udp.html" class="sidebar-link">UPD 协议</a></li><li><a href="/blog/computer/protocols/tcp.html" class="sidebar-link">TCP 协议</a></li><li><a href="/blog/computer/protocols/http.html" class="sidebar-link">HTTP 协议</a></li><li><a href="/blog/computer/protocols/https.html" class="sidebar-link">HTTPS 协议</a></li><li><a href="/blog/computer/protocols/dns.html" class="sidebar-link">DNS 协议</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="并查集"><a href="#并查集" class="header-anchor">#</a> 并查集</h1> <p><strong>并查集</strong>（Disjoint-set）是一种用于处理一些不相交集合的合并和查询问题的数据结构。</p> <h2 id="表示"><a href="#表示" class="header-anchor">#</a> 表示</h2> <p>并查集通常用数组表示元素和集合的关系。数组的索引表示元素，数组的值表示元素所属的集合。初始情况下，我们将 n 个不同的元素放入到只包含自己的集合中。<code>parents</code> 属性用于存储当前元素所属的集合，<code>size</code> 属性表示集合的数量。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>parents <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> n<span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>parents<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="操作"><a href="#操作" class="header-anchor">#</a> 操作</h2> <p>并查集主要包括查找和合并两个操作：</p> <ul><li><p><code>find(x)</code> 用于查找指定元素 x 所在集合。</p></li> <li><p><code>union(x, y)</code> 用于将元素 x 和元素 y 所在集合中的所有元素合并。</p></li></ul> <h2 id="实现"><a href="#实现" class="header-anchor">#</a> 实现</h2> <h3 id="quick-find"><a href="#quick-find" class="header-anchor">#</a> quick-find</h3> <p>quick-find 算法中相同集合的每个元素的值必须相等。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>roots<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">union</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> rootX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> rootY <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>rootX <span class="token operator">===</span> rootY<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
  
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>parents<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>parents<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> rootX<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>parents<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> rootY<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token operator">--</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在合并过程中，我们首先需要检查 x 和 y 是否在同一个集合中。如果是则无需合并；否则我们遍历数组，将元素 x 所在的集合的所有元素合并到元素 y 所在集合中。</p> <p>quick-find 算法的合并操作时间复杂度为 O(n)，可以使用 quick-union 算法进一步优化。</p> <h3 id="quick-union"><a href="#quick-union" class="header-anchor">#</a> quick-union</h3> <p>quick-union 算法引入了树的概念，只不过这棵树使用数组表示。每一个集合表示一棵树，集合中的元素表示为树中的节点，树的根节点表示集合本身。初始情况下，每个节点的根节点为它自己。查找操作会从当前节点向上查找父节点，直到找到根节点为止；合并操作会将一个节点的根节点指向另一个节点的根节点。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>parents<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>parents<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> x<span class="token punctuation">;</span>
  <span class="token comment">/* 迭代实现
  while (x !== this.parents[x]) {
    x = this.parents[x];
  }
  return x;
  */</span>
<span class="token punctuation">}</span>
<span class="token function">union</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> rootX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> rootY <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>rootX <span class="token operator">===</span> rootY<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span>parents<span class="token punctuation">[</span>rootX<span class="token punctuation">]</span> <span class="token operator">=</span> rootY<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token operator">--</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>quick-union 算法虽然优化了 quick-find 算法的合并操作，但在最坏情况下（某些极端输入），树会退化成链表，从而影响查询操作的效率。</p> <h3 id="最优算法"><a href="#最优算法" class="header-anchor">#</a> 最优算法</h3> <p>我们可以使用两种启发式策略来提高合并和查询操作的效率。</p> <p>第一种启发式策略是<strong>按秩合并</strong>（union by rank）。我们维护一个<strong>秩</strong>（ranks），表示每棵树的深度，初始情况下，每棵树的秩为 0。在合并操作中，当两棵树的秩不同时，将较小秩的根指向较大秩的根；当两棵秩相同的树合并后，新的树的秩为原来树的秩加一。</p> <p>第二种启发式策略是<strong>路径压缩</strong>（path compression）。在查找操作中，使用<strong>两趟方法</strong>，第一趟沿着查找路径向上查找根节点，第二趟从根节点向下将路径上的每个节点的父节点指向根节点。</p> <p>以下是结合两种策略的最优算法实现：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">DisjointSet</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>parents <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 存储每个集合的根节点</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ranks <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 用于记录每棵树的秩（深度），从而进行按秩合并</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> n<span class="token punctuation">;</span> <span class="token comment">// 当前集合的数量</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>parents<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span> <span class="token comment">// 每个元素自成一个集合，将每个集合的根节点初始化为自身</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>ranks<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 将每棵树的深度初始化为 0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>parents<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">!==</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>parents<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>parents<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>parents<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">/*
    路径压缩迭代实现
    let root = x;
    while (root !== this.parents[root]) {
      root = this.parents[root]; // 沿着查找路径向上查找根节点
    }
    while (x !== this.parents[x]) {
      [this.parents[x], x] = [root, this.parents[root]]; // 从根节点向下将路径上的每个节点的父节点指向根节点
    }
    return root;
    */</span>
  <span class="token punctuation">}</span>
  <span class="token function">union</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> rootX <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> rootY <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>rootX <span class="token operator">===</span> rootY<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 按秩合并</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ranks<span class="token punctuation">[</span>rootX<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ranks<span class="token punctuation">[</span>rootY<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>parents<span class="token punctuation">[</span>rootX<span class="token punctuation">]</span> <span class="token operator">=</span> rootY<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ranks<span class="token punctuation">[</span>rootX<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ranks<span class="token punctuation">[</span>rootY<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>parents<span class="token punctuation">[</span>rootY<span class="token punctuation">]</span> <span class="token operator">=</span> rootX<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>parents<span class="token punctuation">[</span>rootY<span class="token punctuation">]</span> <span class="token operator">=</span> rootX<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>ranks<span class="token punctuation">[</span>rootX<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token operator">--</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>关于并查集的详细代码和测试请点击<a href="https://github.com/ZhangGuangZe/data-structures-and-algorithms-in-javascript/tree/master/disjoint-set" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>查看。</p> <h2 id="应用场景"><a href="#应用场景" class="header-anchor">#</a> 应用场景</h2> <ul><li>连通性问题</li> <li>最小生成树</li></ul> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <ul><li><a href="https://en.wikipedia.org/wiki/Disjoint-set_data_structure" target="_blank" rel="noopener noreferrer">Wikipedia<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>《算法导论》</li> <li>《算法》（第4版）</li> <li><a href="https://time.geekbang.com/course/detail/100019701-72531" target="_blank" rel="noopener noreferrer">《算法面试通关 40 讲》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>《JavaScript 算法——基本原理与代码实现》</li> <li><a href="https://chat.openai.com/" target="_blank" rel="noopener noreferrer">如何使用 JavaScript 实现并查集<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">6/16/2023, 9:59:41 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/computer/algorithms/graph.html" class="prev">
        图
      </a></span> <span class="next"><a href="/blog/computer/algorithms/strings.html">
        字符串匹配算法
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.a1d041da.js" defer></script><script src="/blog/assets/js/3.157d387a.js" defer></script><script src="/blog/assets/js/22.3972cd73.js" defer></script>
  </body>
</html>
