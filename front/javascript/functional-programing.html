<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>函数式编程 | 前端男孩</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/blog/favicon.ico">
    <meta name="description" content="让学习前端变得更简单">
    
    <link rel="preload" href="/blog/assets/css/0.styles.e00172dc.css" as="style"><link rel="preload" href="/blog/assets/js/app.a1d041da.js" as="script"><link rel="preload" href="/blog/assets/js/3.157d387a.js" as="script"><link rel="preload" href="/blog/assets/js/38.d2ec8309.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.10d04eac.js"><link rel="prefetch" href="/blog/assets/js/11.9ba3bd4a.js"><link rel="prefetch" href="/blog/assets/js/12.976294f0.js"><link rel="prefetch" href="/blog/assets/js/13.6d8c16d0.js"><link rel="prefetch" href="/blog/assets/js/14.de7902db.js"><link rel="prefetch" href="/blog/assets/js/15.5a1ba4fb.js"><link rel="prefetch" href="/blog/assets/js/16.5c0738b0.js"><link rel="prefetch" href="/blog/assets/js/17.24ad9fc5.js"><link rel="prefetch" href="/blog/assets/js/18.97466a80.js"><link rel="prefetch" href="/blog/assets/js/19.ab7f45bf.js"><link rel="prefetch" href="/blog/assets/js/20.bc814125.js"><link rel="prefetch" href="/blog/assets/js/21.d2e7a98e.js"><link rel="prefetch" href="/blog/assets/js/22.3972cd73.js"><link rel="prefetch" href="/blog/assets/js/23.051f60ea.js"><link rel="prefetch" href="/blog/assets/js/24.17690bc6.js"><link rel="prefetch" href="/blog/assets/js/25.fb9095e4.js"><link rel="prefetch" href="/blog/assets/js/26.d21ad9c7.js"><link rel="prefetch" href="/blog/assets/js/27.2e0727d0.js"><link rel="prefetch" href="/blog/assets/js/28.0d67e588.js"><link rel="prefetch" href="/blog/assets/js/29.b6ee7ea6.js"><link rel="prefetch" href="/blog/assets/js/30.633a0933.js"><link rel="prefetch" href="/blog/assets/js/31.039c8a8a.js"><link rel="prefetch" href="/blog/assets/js/32.ebd6d0af.js"><link rel="prefetch" href="/blog/assets/js/33.62d809ef.js"><link rel="prefetch" href="/blog/assets/js/34.748847d5.js"><link rel="prefetch" href="/blog/assets/js/35.7d036cca.js"><link rel="prefetch" href="/blog/assets/js/36.c916c0c5.js"><link rel="prefetch" href="/blog/assets/js/37.1874ee1e.js"><link rel="prefetch" href="/blog/assets/js/39.8dde5718.js"><link rel="prefetch" href="/blog/assets/js/4.7d540803.js"><link rel="prefetch" href="/blog/assets/js/40.c7c9be08.js"><link rel="prefetch" href="/blog/assets/js/41.87da1fc9.js"><link rel="prefetch" href="/blog/assets/js/42.b2733684.js"><link rel="prefetch" href="/blog/assets/js/43.9e0ee656.js"><link rel="prefetch" href="/blog/assets/js/44.63e7c722.js"><link rel="prefetch" href="/blog/assets/js/45.175455ba.js"><link rel="prefetch" href="/blog/assets/js/5.0e2a38a9.js"><link rel="prefetch" href="/blog/assets/js/6.e032fae7.js"><link rel="prefetch" href="/blog/assets/js/7.3f3e7035.js"><link rel="prefetch" href="/blog/assets/js/8.dab26245.js"><link rel="prefetch" href="/blog/assets/js/9.50c616e9.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.2dc030f4.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.e00172dc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">前端男孩</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/blog/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/blog/computer/" class="nav-link">
  计算机基础
</a></div><div class="nav-item"><a href="/blog/front/" class="nav-link router-link-active">
  前端知识体系
</a></div><div class="nav-item"><a href="https://github.com/ZhangGuangZe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/blog/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/blog/computer/" class="nav-link">
  计算机基础
</a></div><div class="nav-item"><a href="/blog/front/" class="nav-link router-link-active">
  前端知识体系
</a></div><div class="nav-item"><a href="https://github.com/ZhangGuangZe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HTML</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/front/javascript/history.html" class="sidebar-link">发展史</a></li><li><a href="/blog/front/javascript/structure.html" class="sidebar-link">语言结构</a></li><li><a href="/blog/front/javascript/type.html" class="sidebar-link">类型系统</a></li><li><a href="/blog/front/javascript/object-oriented-programing.html" class="sidebar-link">面向对象编程</a></li><li><a href="/blog/front/javascript/functional-programing.html" aria-current="page" class="active sidebar-link">函数式编程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/front/javascript/functional-programing.html#函数" class="sidebar-link">函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/front/javascript/functional-programing.html#定义函数" class="sidebar-link">定义函数</a></li><li class="sidebar-sub-header"><a href="/blog/front/javascript/functional-programing.html#函数参数" class="sidebar-link">函数参数</a></li><li class="sidebar-sub-header"><a href="/blog/front/javascript/functional-programing.html#调用函数" class="sidebar-link">调用函数</a></li><li class="sidebar-sub-header"><a href="/blog/front/javascript/functional-programing.html#函数的方法" class="sidebar-link">函数的方法</a></li><li class="sidebar-sub-header"><a href="/blog/front/javascript/functional-programing.html#函数类型" class="sidebar-link">函数类型</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/front/javascript/functional-programing.html#闭包" class="sidebar-link">闭包</a></li><li class="sidebar-sub-header"><a href="/blog/front/javascript/functional-programing.html#函数式编程-2" class="sidebar-link">函数式编程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/front/javascript/functional-programing.html#高阶函数" class="sidebar-link">高阶函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/front/javascript/functional-programing.html#参考" class="sidebar-link">参考</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>WebAPIs</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>浏览器工作原理</span> <!----></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="函数式编程"><a href="#函数式编程" class="header-anchor">#</a> 函数式编程</h1> <h2 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h2> <p>函数是 JavaScript 的重要组成部分之一。在 JavaScript 中，函数类似于过程，是一组执行任务或计算值的语句。在其他语言中，函数是子例程或过程，是程序执行过程中的主要模块单元。不过，不管是在哪种编程语言中，函数都是一种<strong>可调用</strong>的单元。</p> <p>JavaScript 函数是<strong>一等（first-class）对象值</strong>，它可以作为顶层子程序、可以赋值给变量、作为对象的方法、在函数调用中作为参数传递、作为函数的返回值以及作为事件处理器。</p> <p>JavaScript 中的函数是函数对象，每个函数都是 <code>Function</code> 对象的实例，有自己的属性和方法，而函数名是指向函数对象的引用。</p> <h3 id="定义函数"><a href="#定义函数" class="header-anchor">#</a> 定义函数</h3> <p>函数通常以函数声明和函数表达式的形式来定义。</p> <h4 id="函数声明"><a href="#函数声明" class="header-anchor">#</a> 函数声明</h4> <p>函数声明以 <code>function</code> 关键字开头来创建指定名称的函数。它作为一个语句独立使用。</p> <p>函数声明由 <code>function</code> 关键字、函数名称、函数参数列表和函数体组成。并且函数后面不需要分号。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>param<span class="token punctuation">[</span><span class="token punctuation">,</span> param<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token operator">...</span> param<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> statements <span class="token punctuation">}</span>
</code></pre></div><p>函数参数列表由圆括号包裹着并由逗号分隔的零个、一个或多个参数组成。</p> <p>函数体由花括号包裹的零或多条调用函数要执行的语句组成。在函数体中，<code>return</code> 语句会终止函数的执行并将值返回给函数调用者，如果 <code>return</code> 关键字后面没有表达式或者值则会导致函数返回 <code>undefined</code>。如果函数没有 <code>return</code> 语句来指定返回值，则默认返回 <code>undefined</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>函数声明的特点在于<strong>函数声明提升</strong>，也就是函数可以在声明之前使用，这种行为我们将在浏览器工作原理中详细介绍。</p> <h4 id="函数表达式"><a href="#函数表达式" class="header-anchor">#</a> 函数表达式</h4> <p>函数表达式通过 <code>function</code> 关键字在一个表达式中创建函数。它总是作为其他语句的一部分。例如作为值赋值给变量，作为函数参数传递等。</p> <p>函数表达式由 <code>function</code> 关键字、可选的函数名称、函数参数列表和函数体组成。并且函数后面有一个可选的分号。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">function_expression</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>param1<span class="token punctuation">[</span><span class="token punctuation">,</span> param2<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">,</span> paramN<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  statements
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>如果在函数表达式中有函数名称，则表示具名函数表达式，这个函数名称只是函数体中的一个本地变量，可用于在函数内部引用，并且便于在错误堆栈中跟踪，更容易调试。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">namedSum</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>如果函数表达式省略了函数名称，则该函数是一个<strong>匿名函数</strong>（anonymous function）。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>立即调用函数表达式</strong>（Immediately Invoked Function Expression，简称 IIFE）可以让一个只使用一次的函数在定义后立即执行。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// statements</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如上代码所示，IIFE 的第一部分是由括号包裹的函数表达式，第二部分则是调用函数的括号。因为语法规定以 <code>function</code> 关键字开头的是函数声明，而使用括号包裹会被解释为函数表达式。</p> <p>IIEF 常用于模拟模块化和模拟块级作用域，这些应用将会在后面的文章中讨论。</p> <h3 id="函数参数"><a href="#函数参数" class="header-anchor">#</a> 函数参数</h3> <p>函数参数可细分为形参（parameter）和实参（argument）。他们的区别如下：</p> <ul><li>形参是函数定义时声明的参数，可以在函数体内使用，由调用函数的实参初始化。</li> <li>实参是函数调用时实际传递给函数的值。</li></ul> <p>当函数调用时，实参会以形参在函数定义的顺序依次赋值给形参。</p> <p>在函数调用时并不会限制可传递参数的数量。如果调用函数时传递的实参数量少于声明的形参数量，那么多余的形参会被初始化为 <code>undefined</code>。而如果传递的实参数量超过形参数量，则会对额外的实参求值，但无法通过形参名称访问这些值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// =&gt; ['a', undefined]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// =&gt; ['a', 'b']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; ['a', 'b']</span>
</code></pre></div><p>不过在调用函数执行函数体期间，我们可以通过 <code>arguments</code> 对象来访问调用函数时所传递的所有实参。</p> <h4 id="arguments-对象"><a href="#arguments-对象" class="header-anchor">#</a> arguments 对象</h4> <p><code>arguments</code> 对象是一个类数组对象，它包含函数调用时传递给函数的所有实参。我们可以像数组一样通过索引访问每个实参，并通过 <code>length</code> 属性获取传递的实参数量。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sum <span class="token operator">+=</span> arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 6</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 15</span>
</code></pre></div><p>我们可以通过 <code>arguments</code> 对象来实现函数重载和接收参数数量可变的可变函数。</p> <p>在非严格模式下，<code>arguments</code> 对象和形参是同步的。对 <code>arguments</code> 对象属性的更改，同时也会影响对应形参的值。反之亦然，修改形参的值，同时也会影响 <code>arguments</code> 对象。这样会影响代码的可读性。</p> <p>非严格模式下限制了 <code>arguments</code> 对象和形参之间的同步。</p> <h4 id="默认参数"><a href="#默认参数" class="header-anchor">#</a> 默认参数</h4> <p>当函数调用时未提供实参或者传入 <code>undefined</code>，形参的默认值是 <code>undefined</code>，在某些情况下我们需要为形参设置不同的默认值。</p> <p>在 ES6 以前，我们需要在函数体中手动检查某个参数是否为 <code>undefined</code>，如果是则设置一个不同的默认值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">numberToString</span><span class="token punctuation">(</span><span class="token parameter">number<span class="token punctuation">,</span> radix</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  radix <span class="token operator">=</span> <span class="token keyword">typeof</span> radix <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">?</span> radix <span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> number<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>radix<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">numberToString</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// =&gt; '24'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">numberToString</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; '11000'</span>
</code></pre></div><p>以上函数将数值转换为不同进制的字符串，如果未提供第二个参数，则使用默认的十进制基数。</p> <p>然而这种方式会让代码变得冗长，ES6 的默认参数简化了为形参提供默认值的方式，只需在需要设置默认值的形参后面加上 <code>=</code> 号，并指定默认值即可。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">numberToString</span><span class="token punctuation">(</span><span class="token parameter">number<span class="token punctuation">,</span> radix <span class="token operator">=</span> <span class="token number">10</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> number<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>radix<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">numberToString</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// =&gt; '24'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">numberToString</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; '11000'</span>
</code></pre></div><p>因为默认参数是按照顺序依次从左往右初始化的，所以前面定义的默认参数不能引用后面定义的形参。</p> <h4 id="收集参数"><a href="#收集参数" class="header-anchor">#</a> 收集参数</h4> <p>收集参数的设计初衷是为了代替 <a href="#arguments-%E5%AF%B9%E8%B1%A1"><code>arguments</code></a> 对象，从而实现参数数量可变的可变函数。</p> <p>在 ES6 中，我们可以在形参前面使用扩展操作符（<code>...</code>） 将不确定数量的实参收集到一个以形参命名的数组中。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sum <span class="token operator">+=</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 6</span>
</code></pre></div><p>如果收集参数前面有命名参数，则只会收集其余参数。如果命名参数后面没有多余的参数，则会得到一个空数组。</p> <p>在函数定义中，只能声明一个收集参数并且必须作为最后一个参数。</p> <h4 id="扩展参数"><a href="#扩展参数" class="header-anchor">#</a> 扩展参数</h4> <p>在 ES6 以前，当某个函数调用的参数是动态的参数列表时，我们通常需要手动处理或使用 <code>apply()</code> 方法来处理，这样会让代码变得复杂且难以理解。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 5</span>
</code></pre></div><p>如上例，<code>Math.max()</code> 方法可以接收任意数量的参数并返回最大的那个。由于不允许传入一个数组，所以我们使用 <code>apply()</code> 方法将数组中的每个元素作为函数的参数传递给 <code>Math.max()</code> 方法。</p> <p>而在 ES6 中，我们可以将一个可迭代对象通过扩展操作符（<code>...</code>） 展开为多个实参并在函数调用时依次传给对应位置的形参。从而让代码看起来简洁且易懂。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 5</span>
</code></pre></div><p>扩展操作符可以在函数调用时的任意位置多次使用。</p> <div class="language-js extra-class"><pre class="language-js"><code>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 5</span>
</code></pre></div><h4 id="解构参数"><a href="#解构参数" class="header-anchor">#</a> 解构参数</h4> <p>在函数参数传递过程中，如果传递的是一个数组或对象实参，可以通过解构来提取数组的元素和对象的属性来作为函数的形参，这样更清晰的知道函数所需要的参数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">printPerson</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">printPerson</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'front-boy'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">27</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>不过，如果调用函数时没有传递参数会导致程序抛错。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">printPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; TypeError: Cannot destructure property 'name' of 'undefined' as it is undefined.</span>
</code></pre></div><p>因为解构赋值表达式的右值不能为空值，所以可以使用一个 <code>{}</code> 的默认参数来解决该问题。并且可以使用默认参数来为解构的形参提供默认值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">printPerson</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token operator">=</span> <span class="token string">'default-boy'</span><span class="token punctuation">,</span> age <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">printPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="调用函数"><a href="#调用函数" class="header-anchor">#</a> 调用函数</h3> <p>定义函数仅仅是赋予函数名称并明确函数调用时做什么，而调用函数则会传递参数并执行函数。</p> <h4 id="this-关键字"><a href="#this-关键字" class="header-anchor">#</a> this 关键字</h4> <p><code>this</code> 关键字表示函数在作为方法被调用时的上下文对象。在 ES6 以前，每个函数都有一个隐式的 <code>this</code> 形参，在函数调用时会动态隐式传递参数。在函数内部，因为 <code>this</code> 值取决于函数的调用方式，所以相同的 <code>this</code> 值在不同的调用方式下可能具有不同的含义。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">showThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  showThis<span class="token operator">:</span> showThis
<span class="token punctuation">}</span>
<span class="token function">showThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// =&gt; globalThis</span>
o<span class="token punctuation">.</span><span class="token function">showThis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; o</span>
</code></pre></div><p>我们可以通过以下四种方式调用函数：</p> <h4 id="独立函数调用"><a href="#独立函数调用" class="header-anchor">#</a> 独立函数调用</h4> <p>在 ES5 以前，直接调用独立函数的行为都会传入 <code>null</code> 作为隐式 <code>this</code> 参数，并且所有函数在被调用时，都会把值为 <code>null</code> 的 <code>this</code> 替换为全局对象（<code>globalThis</code>）。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>将独立函数的 <code>this</code> 值设置为 <code>globalThis</code> 的初衷是为了统一处理把构造函数和方法当成独立函数调用时的 <code>this</code> 值。这样的好处在于提供了一种简单且灵活的方式来访问 <code>globalThis</code> 上的变量和函数。</p> <p>但在早期 JavaScript 实现中，由于全局函数当做局部变量被调用时在不同实现的行为不一致，所以在早期规范中规定以上述方式调用函数的 <code>this</code> 值会设置为 <code>globalThis</code>。</p></div> <p>但是这种行为在存在两个问题：</p> <p>其一，访问 <code>globalThis</code> 会导致意外的副作用和安全性问题。所以在 ES5 中，严格模式下的函数不再使用 <code>globalThis</code> 替换实际的 <code>this</code> 值，而是使用 <code>undefined</code> 屏蔽对 <code>globalThis</code> 的访问，从而避免了相关的问题。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; globalThis</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">'use strict'</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; undefined</span>
</code></pre></div><p>其二，将局部函数的 <code>this</code> 值设置为 <code>globalThis</code> 是不合理的。这种方式虽然保持了 <code>this</code> 值的一致性，但却容易让人产生疑惑。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">outerFn</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; obj</span>

    <span class="token keyword">function</span> <span class="token function">innerFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; globalThis</span>
    <span class="token punctuation">}</span>
    <span class="token function">innerFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">outerFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>从上面这段代码我们可以发现，内部函数的 <code>this</code> 值并不是预期的使用外层的 <code>obj</code>，而是 <code>globalThis</code>。</p> <p>如果要实现预期的效果，可以在 <code>outerFn</code> 中声明一个变量 <code>self</code> 来保存 <code>this</code> 值，然后再在 <code>innerFn</code> 中使用 <code>self</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">outerFn</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; obj</span>

    <span class="token keyword">let</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">innerFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; obj</span>
    <span class="token punctuation">}</span>
    <span class="token function">innerFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">outerFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ES6 引入了<a href="#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0">箭头函数</a>可以让我们轻松在 <code>innerFn</code> 中引用 <code>outerFn</code> 中的 <code>this</code> 值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">outerFn</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; obj</span>

    <span class="token keyword">const</span> <span class="token function-variable function">innerFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; obj</span>
    <span class="token punctuation">}</span>
    <span class="token function">innerFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">outerFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="作为方法调用"><a href="#作为方法调用" class="header-anchor">#</a> 作为方法调用</h4> <p>当一个对象属性是一个函数时，可以作为对象的方法被调用。方法调用时会隐式传递调用该方法的（最后一个）对象作为 <code>this</code> 值，这样在方法内部就可以通过 <code>this</code> 关键字访问动态绑定的对象。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> calculator <span class="token operator">=</span> <span class="token punctuation">{</span>
  operand1<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  operand2<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>operand1 <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>operand2<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>calculator<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 3</span>
</code></pre></div><h4 id="通过-call-apply-间接调用"><a href="#通过-call-apply-间接调用" class="header-anchor">#</a> 通过 <code>call()</code>/<code>apply()</code> 间接调用</h4> <p><code>call()</code>/<code>apply()</code> 可以显示的传递任意对象作为函数的 <code>this</code> 值，使得函数可以被不同对象调用，从而提高代码的复用性和可维护性。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'Hello, '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> person1 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'front-boy'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> person2 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'old-boy'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sayName</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>person1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// =&gt; Hello, front-boy</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sayName</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>person2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; Hello, old-boy</span>
</code></pre></div><p>关于 <code>call()</code>/<code>apply()</code>，我们将会在<a href="#%E5%87%BD%E6%95%B0%E7%9A%84%E6%96%B9%E6%B3%95">函数的方法</a>中详细讲解。</p> <h4 id="作为构造函数调用"><a href="#作为构造函数调用" class="header-anchor">#</a> 作为构造函数调用</h4> <p>在函数调用之前使用 <code>new</code> 操作符即可作为构造函数调用。这种方式并不会传递 <code>this</code> 值，而是由 <code>new</code> 操作符自动设置为对象实例。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>关于使用 <code>new</code> 操作符调用函数的原理，请前往 JavaScript 面向对象中的<a href="/blog/front/javascript/object-oriented-programing.html#早期的对象模型">早期的对象模型</a>中查看。</p></div> <h3 id="函数的方法"><a href="#函数的方法" class="header-anchor">#</a> 函数的方法</h3> <p>JavaScript 中的函数是对象，可以像其他对象一样拥有自己的方法。</p> <h4 id="call-和-apply-方法"><a href="#call-和-apply-方法" class="header-anchor">#</a> <code>call()</code> 和 <code>apply()</code> 方法</h4> <p><code>call()</code> 和 <code>apply()</code> 方法都是以指定 <code>this</code> 值和可选参数来间接调用函数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 3</span>
</code></pre></div><p><code>call()</code> 和 <code>apply()</code> 方法的第一参数都是显式指定的 <code>this</code> 值。不同之处在于：</p> <p><code>call()</code> 方法以逗号分隔的参数列表方式传递参数。</p> <p>根据 <code>call()</code> 方法的行为，我们可以对其进行模拟实现：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">callPolyfill</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context <span class="token operator">=</span> context <span class="token operator">||</span> globalThis<span class="token punctuation">;</span>
  context<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> result<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      args<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'arguments['</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">']'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    result <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">'context.fn('</span> <span class="token operator">+</span> args <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">delete</span> context<span class="token punctuation">.</span>fn<span class="token punctuation">;</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>而 <code>apply()</code> 方法以一个数组或类数组对象的参数方式传递参数。</p> <p>根据 <code>apply()</code> 方法的行为，我们可以对其进行模拟实现：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">applyPolyfill</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> argsArray</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  context <span class="token operator">=</span> context <span class="token operator">||</span> globalThis<span class="token punctuation">;</span>
  argsArray <span class="token operator">=</span> argsArray <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  context<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> result<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>argsArray<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> argsArray<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      args<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'argsArray['</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">']'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    result <span class="token operator">=</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">'context.fn('</span> <span class="token operator">+</span> args <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">delete</span> context<span class="token punctuation">.</span>fn<span class="token punctuation">;</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>eval()</code> 函数仅用于在模拟代码中动态执行字符串，请勿在生产环境使用。</p></div> <h4 id="bind-方法"><a href="#bind-方法" class="header-anchor">#</a> <code>bind()</code> 方法</h4> <p><code>bind()</code> 方法会创建一个新函数，当调用新函数时，它会调用原始函数并将其 <code>this</code> 值设置为指定的值，同时，还可以传递一系列指定的参数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> succ <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">succ</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; 3</span>
</code></pre></div><p>根据 <code>bind()</code> 方法的行为，我们可以对其进行模拟实现：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">bindPolyfill</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> originalFn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> bindArgs <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> callArgs <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">originalFn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> bindArgs<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>callArgs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="函数类型"><a href="#函数类型" class="header-anchor">#</a> 函数类型</h3> <p>除了上面使用函数声明和函数表达式定义的普通函数外，还有一些专用函数。</p> <h4 id="箭头函数"><a href="#箭头函数" class="header-anchor">#</a> 箭头函数</h4> <p>ES6 引入了箭头函数来让以更简洁的方式来定义函数表达式，同时能够减少错误，让 JavaScript 引擎更好的优化箭头函数的执行过程。</p> <p>箭头函数的语法由参数列表、胖箭头（<code>=&gt;</code>）和函数体组成。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token parameter">param1<span class="token punctuation">,</span> paramN</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  statements
<span class="token punctuation">}</span>
</code></pre></div><p>当参数列表只有一个简单参数时，可以省略圆括号，否则圆括号是必须的；</p> <p>有了胖箭头表示函数表达式，所以不需要 <code>function</code> 关键字；</p> <p>当函数体只有一个表达式时，可以省略花括号和 <code>return</code> 关键字，函数会隐式的返回表达式的值，如果表达式是一个对象字面量，需要使用圆括号包裹，用于让引擎区分这是一个对象字面量而不是函数体。如果函数体中有两条或两条以上语句，需要使用花括号包裹，并在需要返回值的情况显式地定义一个返回值。</p> <p>为了确保函数的行为符合预期，箭头函数增加了很多限制：</p> <ul><li><p><strong>没有 <code>this</code> 值</strong>：箭头函数没有自己的 <code>this</code> 值，而是根据箭头函数定义时的词法作用域来决定，从而让箭头函数内的 <code>this</code> 值不会根据函数调用的上下文而改变；因为没有 <code>this</code> 值，所以箭头函数不能用作方法。因为箭头函数的 <code>this</code> 值取决于定义时的词法作用域，使用 <code>call()</code>、<code>apply()</code>、<code>bind()</code> 等方法无法改变 <code>this</code> 值。</p></li> <li><p><strong>没有 <code>arguments</code> 对象</strong>：箭头函数没有自己的 <code>arguments</code> 对象，不过箭头函数可以访问外层普通函数的 <code>arguments</code> 对象。如果需要使用参数列表，收集参数是一个更好地选择。</p></li> <li><p><strong>不能用作构造函数</strong>：使用 <code>new</code> 操作符调用箭头函数会导致程序抛出错误。无法使用 <code>new.target</code> 和 <code>super</code> 关键字。箭头函数也没有 <code>prototype</code> 属性。</p></li> <li><p><strong>不能用作生成器函数</strong>：在箭头函数中不能使用 <code>yield</code> 关键字。</p></li></ul> <h4 id="类"><a href="#类" class="header-anchor">#</a> 类</h4> <p>JavaScript 中的类实际上是一种特殊函数。可以在<a href="/blog/front/javascript/object-oriented-programing.md/#基于类的面向对象">基于类的面向对象</a>查看关于类的更多细节。</p> <h4 id="生成器函数"><a href="#生成器函数" class="header-anchor">#</a> 生成器函数</h4> <p>生成器函数将在集合中详细介绍。</p> <h4 id="异步函数"><a href="#异步函数" class="header-anchor">#</a> 异步函数</h4> <p>异步函数将在异步编程中详细介绍。</p> <h2 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h2> <p><strong>闭包</strong>（Closure）是二十世纪六十年代为了在 λ 演算中对表达式的机器求值而提出来的一个计算机编程概念，表示一种包含环境部分和控制部分的实体。闭包是一种在支持头等函数的编程语言中实现词法绑定的一种技术。</p> <p>在 JavaScript 中，以函数能够访问其定义时的环境变量的方式得以实现。</p> <h2 id="函数式编程-2"><a href="#函数式编程-2" class="header-anchor">#</a> 函数式编程</h2> <h3 id="高阶函数"><a href="#高阶函数" class="header-anchor">#</a> 高阶函数</h3> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" target="_blank" rel="noopener noreferrer">MDN-JavaScript<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>《JavaScript 高级程序设计》（第 4 版）</li> <li>《JavaScript 权威指南》（原书第 7 版）</li> <li>《JavaScript 语言精髓与编程实战》（第 3 版）</li> <li><a href="https://exploringjs.com/impatient-js/ch_callables.html" target="_blank" rel="noopener noreferrer">《JavaScript for impatient programmers (ES1–ES2022) 》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>《JavaScript 编程精解》（原书第 3 版）</li> <li>《深入理解 ES6》</li> <li>《深入理解 JavaScript 特性》</li> <li><a href="https://github.com/doodlewind/jshistory-cn" target="_blank" rel="noopener noreferrer">《JavaScript 二十年》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>《你不知道的 JavaScript》上卷</li> <li>《JavaScript 忍者秘籍》(第 2 版)</li> <li>《JavaScript 悟道》</li> <li><a href="https://time.geekbang.org/column/article/78884" target="_blank" rel="noopener noreferrer">重学前端<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.zhihu.com/question/353757734/answer/2935071349" target="_blank" rel="noopener noreferrer">JavaScript 的 this 原理是什么？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">10/8/2024, 8:30:43 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/front/javascript/object-oriented-programing.html" class="prev">
        面向对象编程
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.a1d041da.js" defer></script><script src="/blog/assets/js/3.157d387a.js" defer></script><script src="/blog/assets/js/38.d2ec8309.js" defer></script>
  </body>
</html>
